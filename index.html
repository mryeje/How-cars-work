<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>How Cars Work â€” Dadâ€™s Course</title>
<style>
  :root { 
    --bg: #FDFBF7; 
    --surface: #ffffff;
    --text: #1a1a1a;
    --text-muted: #555555;
    --accent: #2563eb;
    --accent-light: #dbeafe;
    --success: #166534;
    --success-bg: #dcfce7;
    --border: #e5e7eb;
    --font-main: "Verdana", "Segoe UI", sans-serif;
  }

  body {
    margin: 0;
    background-color: var(--bg);
    color: var(--text);
    font-family: var(--font-main);
    font-size: 20px;
    line-height: 1.6;
  }

  header {
    background: var(--surface);
    border-bottom: 2px solid var(--border);
    padding: 20px;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .header-content {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 40px;
  }

  @media (max-width: 850px) {
    .container { grid-template-columns: 1fr; }
    .sidebar { display: none; }
  }

  .sidebar {
    background: var(--surface);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid var(--border);
    height: fit-content;
    max-height: 80vh;
    overflow-y: auto;
  }

  .nav-chapter {
    font-weight: bold;
    margin-top: 15px;
    color: var(--text-muted);
    font-size: 0.85rem;
    text-transform: uppercase;
  }

  .nav-item {
    padding: 10px;
    cursor: pointer;
    border-radius: 8px;
    font-size: 0.95rem;
    margin-bottom: 2px;
    display: flex;
    justify-content: space-between;
  }

  .nav-item.active { background: var(--accent-light); color: var(--accent); font-weight: bold; }

  .lesson-card {
    background: var(--surface);
    padding: 40px;
    border-radius: 12px;
    border: 1px solid var(--border);
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
  }

  .analogy-box {
    background: #eff6ff;
    border-left: 5px solid var(--accent);
    padding: 20px;
    margin: 20px 0;
  }

  .recall-box {
    border: 3px dashed #f87171;
    background: #fff1f2;
    padding: 20px;
    text-align: center;
    margin: 30px 0;
    font-weight: bold;
  }

  .quiz-box { border-top: 2px solid var(--border); margin-top: 30px; padding-top: 20px; }
  
  .option {
    display: block; width: 100%; text-align: left; padding: 15px;
    margin: 10px 0; border: 2px solid var(--border); border-radius: 8px;
    background: white; cursor: pointer; font-size: 1rem;
  }
  
  .option.correct { background: var(--success-bg); border-color: var(--success); }

  .timer-widget {
    background: #111; color: #fff; padding: 10px 20px;
    border-radius: 50px; display: flex; gap: 15px; align-items: center;
  }

  .btn {
    padding: 15px 25px; border-radius: 50px; border: none;
    font-weight: bold; cursor: pointer; font-size: 1rem;
  }
  .btn-primary { background: var(--accent); color: white; }
  .btn-secondary { background: #e5e7eb; color: var(--text); }
</style>
</head>
<body>

<header>
  <div class="header-content">
    <div><strong>How Cars Work</strong> â€” Course</div>
    <div class="timer-widget">
      <span id="timerDisplay">25:00</span>
      <button onclick="toggleTimer()" id="timerBtn" style="cursor:pointer">Start Focus</button>
    </div>
  </div>
</header>

<div class="container">
  <div class="sidebar" id="sidebar"></div>
  <main>
    <div id="lessonContainer" class="lesson-card"></div>
    <div style="margin-top:20px; display:flex; justify-content:space-between; align-items:center;">
        <button class="btn btn-secondary" onclick="prevLesson()">Back</button>
        <div>
            <input type="checkbox" id="markDone" onchange="toggleDone()" style="transform: scale(1.5);"> 
            <label for="markDone"> Finished</label>
        </div>
        <button class="btn btn-primary" onclick="nextLesson()">Next</button>
    </div>
  </main>
</div>

<script>
const courseData = [
  {
    id: "intro", chapter: "Getting Started", title: "How to Learn", page: "1",
    text: "We aren't going to cram. We are going to build 'chunks' of knowledge. 1. Read a section. 2. Look at the picture in the book. 3. Look away and explain it out loud.",
    analogy: "Learning a car is like building one: you don't start with the whole car, you start with one bolt and one bracket until it all connects.",
    quiz: { q: "What is the best way to remember a lesson?", a: "Explain it out loud after reading", opts: ["Read it 5 times fast", "Explain it out loud after reading", "Just keep going"] }
  },
  {
    id: "c1-block", chapter: "Chapter 1: Engine", title: "The Engine Block", page: "9",
    text: "The engine block is the foundation. It's a solid piece of iron or aluminum with holes (cylinders) bored into it. It doesn't move, but everything else moves inside it.",
    analogy: "The block is like the <strong>foundation of a house</strong>. It holds everything steady while the people move around inside.",
    quiz: { q: "Does the engine block have moving parts?", a: "No, it is a solid casting", opts: ["Yes, it spins", "No, it is a solid casting"] }
  },
  {
    id: "c1-piston", chapter: "Chapter 1: Engine", title: "The Piston", page: "12",
    text: "The piston is like an upside-down soup can. When fuel explodes, it drives the piston down with massive force.",
    analogy: "Think of a <strong>bicycle pedal</strong>. Your leg (the explosion) pushes down on the pedal (the piston) to create movement.",
    quiz: { q: "What drives the piston down?", a: "The force of burning fuel", opts: ["Gravity", "The force of burning fuel", "The battery"] }
  },
  {
    id: "c2-trans", chapter: "Chapter 2: Drive Train", title: "Transmission", page: "24",
    text: "The transmission is a box of gears. It takes the engine's power and decides how much of it to send to the wheels based on how fast you want to go.",
    analogy: "It's like a <strong>10-speed bike</strong>. You use different gears to make it easier to go up a hill or go fast on a flat road.",
    quiz: { q: "What does the transmission use to change speed?", a: "Different sized gears", opts: ["More gas", "Different sized gears", "Water pressure"] }
  }
  // You can easily add more lessons here by following the format
];

let currentIndex = 0;
let doneLessons = JSON.parse(localStorage.getItem('dad_car_done')) || [];

function init() {
  renderSidebar();
  loadLesson(0);
}

function renderSidebar() {
  const sb = document.getElementById('sidebar');
  sb.innerHTML = "";
  let currentChap = "";
  courseData.forEach((l, i) => {
    if(l.chapter !== currentChap) {
      const h = document.createElement('div'); h.className="nav-chapter"; h.textContent=l.chapter; sb.appendChild(h);
      currentChap = l.chapter;
    }
    const item = document.createElement('div');
    item.className = `nav-item ${i === currentIndex ? 'active' : ''}`;
    item.innerHTML = `<span>${l.title}</span> <span>${doneLessons.includes(l.id) ? 'âœ“' : ''}</span>`;
    item.onclick = () => loadLesson(i);
    sb.appendChild(item);
  });
}

function loadLesson(i) {
  currentIndex = i;
  const l = courseData[i];
  const container = document.getElementById('lessonContainer');
  document.getElementById('markDone').checked = doneLessons.includes(l.id);

  container.innerHTML = `
    <div style="color:var(--accent); font-weight:bold; margin-bottom:10px;">Page ${l.page} in the book</div>
    <h2>${l.title}</h2>
    <div class="analogy-box"><strong>The Simple Way to Think About It:</strong><br>${l.analogy}</div>
    <p>${l.text}</p>
    <div class="recall-box">ðŸ›‘ STOP & RECALL<br>Look away from the screen. Explain what a ${l.title} does in your own words.</div>
    <div class="quiz-box">
        <p><strong>Quick Check:</strong> ${l.quiz.q}</p>
        ${l.quiz.opts.map(opt => `<button class="option" onclick="checkAnswer(this, '${l.quiz.a}')">${opt}</button>`).join('')}
    </div>
  `;
  renderSidebar();
}

function checkAnswer(btn, correct) {
    if(btn.textContent === correct) {
        btn.classList.add('correct');
        alert("Spot on!");
    } else {
        alert("Not quiteâ€”try reading the explanation again.");
    }
}

function nextLesson() { if(currentIndex < courseData.length-1) loadLesson(currentIndex+1); }
function prevLesson() { if(currentIndex > 0) loadLesson(currentIndex-1); }

function toggleDone() {
    const id = courseData[currentIndex].id;
    if(document.getElementById('markDone').checked) {
        if(!doneLessons.includes(id)) doneLessons.push(id);
    } else {
        doneLessons = doneLessons.filter(d => d !== id);
    }
    localStorage.setItem('dad_car_done', JSON.stringify(doneLessons));
    renderSidebar();
}

// Timer
let timer; let seconds = 1500; let running = false;
function toggleTimer() {
    running = !running;
    document.getElementById('timerBtn').textContent = running ? "Pause" : "Resume Focus";
    if(running) {
        timer = setInterval(() => {
            seconds--;
            let m = Math.floor(seconds/60); let s = seconds%60;
            document.getElementById('timerDisplay').textContent = `${m}:${s < 10 ? '0'+s : s}`;
            if(seconds <= 0) { clearInterval(timer); alert("Time for a break! Let your brain rest."); }
        }, 1000);
    } else { clearInterval(timer); }
}

init();
</script>
</body>
</html>